:canonical-base-url: https://dckms.github.io/system-architecture

.. index::
   single: Encapsulation; in Golang
   :name: emacsway-golang-domain-file-structure

==================================
–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
==================================

.. sectionauthor:: Ivan Zakrevsky

–û –ø—Ä–∏—á–∏–Ω–∞—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∞–∫–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

.. contents:: –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ


–ó–∞—á–µ–º –≤ –∫–∞–∂–¥–æ–º Bounded Context –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è internal?
===================================================

–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞.
–î—Ä—É–≥–∏–º Bounded Contexts –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ CQRS-Commands –∏ Public Domain Events (Integration Events).


–ü–æ—á–µ–º—É –∞–≥—Ä–µ–≥–∞—Ç—ã —Ä–µ–∑–º–µ—â–µ–Ω—ã –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö?
====================================================

–ü—Ä–∏—á–∏–Ω—ã –¥–≤–µ:

1. –ß—Ç–æ–±—ã –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å High Cohesion, —Å–º. –≥–ª–∞–≤—É "Chapter Five. A Model Expressed in Software :: Modules" –∫–Ω–∏–≥–∏ "Domain-Driven Design: Tackling Complexity in the Heart of Software" by Eric Evans.
2. –í Golang —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ :ref:`–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ <emacsway-golang-encapsulation>`, —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º –∞—Ç—Ä–∏–±—É—Ç–∞–º –ê–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑–≤–Ω–µ.

..

    üí¨ "–ú–û–î–£–õ–ò –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –º–æ–¥–µ–ª—å —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω:
    –≤–æ-–ø–µ—Ä–≤—ã—Ö, –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –ø–æ–¥—Ä–æ–±¬≠–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–æ–¥—É–ª—è, –Ω–µ –≤–Ω–∏–∫–∞—è –≤ —Å–ª–æ–∂–Ω–æ–µ —Ü–µ–ª–æ–µ;
    –≤–æ-–≤—Ç–æ—Ä—ã—Ö, —É–¥–æ–±–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏, –Ω–µ –≤–¥–∞–≤–∞—è—Å—å –≤ –¥–µ—Ç–∞–ª–∏ –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

    <...>

    –¢–æ, —á—Ç–æ –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ–±–ª—é–¥–∞—Ç—å—Å—è –Ω–∏–∑–∫–∞—è –≤–Ω–µ—à–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (low coupling) –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏ (high cohesion)- —ç—Ç–æ –æ–±—â–∏–µ —Å–ª–æ–≤–∞.
    –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –≥—Ä–µ—à–∞—Ç —É–∫–ª–æ–Ω–æ–º –≤ —á–∏—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç¬≠–≤–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –∏—Ö —è–∫–æ–±—ã –º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å, –ø–æ–¥—Å—á–∏—Ç–∞–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Å—Å–æ¬≠—Ü–∏–∞—Ü–∏–π –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.
    –ù–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ–¥—Ä–∞–∑–¥–µ¬≠–ª–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ –º–æ–¥—É–ª–∏, –∞ –∏–¥–µ–π–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏.
    –ß–µ–ª–æ–≤–µ–∫ –Ω–µ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–µ—Ä¬≠–∂–∏–≤–∞—Ç—å –≤ —É–º–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–æ—Ç—Å—é–¥–∞ –Ω–∏–∑–∫–∞—è –≤–Ω–µ—à–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å).
    –ê –ø–ª–æ—Ö–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É —Å–æ–±–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ç–∞–∫ –∂–µ —Ç—Ä—É–¥–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é "–∫–∞—à—É" –∏–∑ –∏–¥–µ–π (–æ—Ç—Å—é–¥–∞ –≤—ã—Å–æ–∫–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–≤—è–∑–Ω–æ—Å—Ç—å).

    MODULES give people two views of the model:
    They can look at detail within a MODULE without being overwhelmed by the whole, or they can look at relationships between MODULES in views that exclude interior detail.

    <...>

    It is a truism that there should be low coupling between MODULES and high cohesion within them.
    Explanations of coupling and cohesion tend to make them sound like technical metrics, to be judged mechanically based on the distributions of associations and interactions. Yet it isn't just code being divided into MODULES, but concepts.
    There is a limit to how many things a person can think about at once (hence low coupling).
    Incoherent fragments of ideas are as hard to understand as an undifferentiated soup of ideas (hence high cohesion)."

    -- "Domain-Driven Design: Tackling Complexity in the Heart of Software" by Eric¬†Evans, –ø–µ—Ä–µ–≤–æ–¥ –í.–õ. –ë—Ä–æ–¥–æ–≤–æ–≥–æ


–ü–æ—á–µ–º—É –°—É—â–Ω–æ—Å—Ç–∏ –ê–≥—Ä–µ–≥–∞—Ç–æ–≤ –≤—ã–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏?
==========================================================

–ß—Ç–æ–±—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –°—É—â–Ω–æ—Å—Ç—å—é –æ–±—ä–µ–∫—Ç—ã.
–ù–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤–∏–Ω–µ–≥—Ä–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –°—É—â–Ω–æ—Å—Ç–µ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –≤ –º–æ–º–µ–Ω—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∏ –ø–æ–≤—ã—à–∞—é—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

–í–ø—Ä–æ—á–µ–º, —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–∫–∞ —á—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –∏ –Ω–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–º.

–ï—Å—Ç—å —É —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –°—É—â–Ω–æ—Å—Ç—å, —Ö–æ—Ç—è –∏ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å—Å—è –Ω–∞—Ä—É–∂—É –ê–≥—Ä–µ–≥–∞—Ç–∞, –µ—Å–ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–π.

    üí¨Ô∏è "–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –°–£–©–ù–û–°–¢–ò –∏ –û–ë–™–ï–ö–¢–´-–ó–ù–ê–ß–ï–ù–ò–Ø –≤ –ê–ì–†–ï–ì–ê–¢–´ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö.
    –í—ã–±–µ—Ä–∏—Ç–µ –æ –¥–∏–Ω –æ–±—ä–µ–∫—Ç-–°–£–©–ù–û–°–¢–¨ –∏ —Å–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∫–æ—Ä–Ω–µ–≤—ã–º.
    –û—Å—É—â–µ—Å—Ç–≤–ª—è–π—Ç–µ –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –æ–±—ä–µ–∫—Ç–∞–º –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ê–ì–†–ï–ì–ê–¢–ê —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –µ–≥–æ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç.
    –†–∞–∑—Ä–µ—à–∞–π—Ç–µ –≤–Ω–µ—à–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç.
    **–°—Å—ã–ª–∫–∏ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã –ê–ì–†–ï–ì–ê–¢–ê —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –Ω–∞ –≤—Ä–µ–º—è –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.**
    **–ü–æ—Å–∫–æ–ª—å–∫—É –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç–∞–º –ê–ì–†–ï–ì–ê–¢–ê –∫–æ–Ω¬≠—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã.**
    –í —Ç–∞–∫–æ–π —Å—Ö–µ–º–µ —Ä–∞–∑—É–º–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –≤—Å–µ—Ö –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ê–ì–†–ï–ì–ê–¢–ï –∏ –¥–ª—è –≤—Å–µ–≥–æ –ê–ì–†–ï–ì–ê–¢–ê –≤ —Ü–µ–ª–æ–º –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

    Cluster the ENTITIES and VALUE OBJECTS into AGGREGATES and define boundaries around each.
    Choose one ENTITY to be the root of each AGGREGATE, and control all access to the objects inside the boundary through the root.
    Allow external objects to hold references to the root only.
    **Transient references to internal members can be passed out for use within a single operation only.**
    **Because the root controls access, it cannot be blindsided by changes to the internals.**
    This arrangement makes it practical to enforce all invariants for objects in the AGGREGATE and for the AGGREGATE as a whole in any state change."

    -- "Domain-Driven Design: Tackling Complexity in the Heart of Software" by Eric¬†Evans, –ø–µ—Ä–µ–≤–æ–¥ –í.–õ. –ë—Ä–æ–¥–æ–≤–æ–≥–æ

–û —á–µ–º —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç?
–≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –º—ã —Ä–∞–∑–º–µ—Å—Ç–∏–º –°—É—â–Ω–æ—Å—Ç—å –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ —Å –ê–≥—Ä–µ–≥–∞—Ç–æ–º, —Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ê–≥—Ä–µ–≥–∞—Ç—É –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –°—É—â–Ω–æ—Å—Ç–∏.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ê–≥—Ä–µ–≥–∞—Ç –æ–±–ª–∞–¥–∞–µ—Ç –¥—Ä—É–≥–∏–º —É—Ä–æ–≤–Ω–µ–º –¥–æ—Å—Ç—É–ø–∞, –Ω–µ–∂–µ–ª–∏ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º—É—Ç–∏—Ä—É—é—â–∏–º –º–µ—Ç–æ–¥–∞–º –°—É—â–Ω–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–∏ –Ω—É–∂–Ω—ã –ê–≥—Ä–µ–≥–∞—Ç—É.

–ù–æ –∑–¥–µ—Å—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å - —Å–ª–µ–¥–æ–≤–∞—Ç—å –ª–∏ `Law of Demeter <https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD_%D0%94%D0%B5%D0%BC%D0%B5%D1%82%D1%80%D1%8B>`__ –≤–Ω—É—Ç—Ä–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞?
–°–ª–µ–¥—É–µ—Ç –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –ê–≥—Ä–µ–≥–∞—Ç–∞ –∫ –°—É—â–Ω–æ—Å—Ç—è–º –µ–≥–æ –°—É—â–Ω–æ—Å—Ç–µ–π?
–ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ê–≥—Ä–µ–≥–∞—Ç–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å.


–ü–æ—á–µ–º—É –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ –Ω–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –µ–≥–æ –û–±—ä–µ–∫—Ç–æ–≤-–∑–Ω–∞—á–µ–Ω–∏–π?
======================================================================

–ü—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ã–ª–∞ –≤–Ω–∞—á–∞–ª–µ, –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å —Ü–µ–ª—å—é –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤.
–≠—Ç–æ –±—ã–ª–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –°—É—â–Ω–æ—Å—Ç–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ –∏–º–µ–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
–ù–∞–ø—Ä–∏–º–µ—Ä, –ê–≥—Ä–µ–≥–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω –æ —Å–≤–æ–µ–π –°—É—â–Ω–æ—Å—Ç–∏, –∞ –°—É—â–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω–∞ –æ–± –û–±—ä–µ–∫—Ç–µ-–∑–Ω–∞—á–µ–Ω–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞.

–ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ, –≤—Å–µ –û–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è –ê–≥—Ä–µ–≥–∞—Ç–∞/–°—É—â–Ω–æ—Å—Ç–∏ –±—ã–ª–∏ –≤—ã–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞/–°—É—â–Ω–æ—Å—Ç–∏.
–ò–Ω–∞—á–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ C—É—â–Ω–æ—Å—Ç–∏ –∏ –û–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è –ê–≥—Ä–µ–≥–∞—Ç–∞ —Ä–∞–∑–º–µ—Ç–∏—Ç—å –ø–ª–æ—Å–∫–∏–º —Å–ø–∏—Å–∫–æ–º –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–ª–æ –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

–ü–æ–∑–∂–µ —è –æ–±–Ω–∞—Ä—É–∂–∏–ª –µ—â–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ - –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –ê–≥—Ä–µ–≥–∞—Ç –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–≤–∞–ª –û–±—ä–µ–∫—Ç-–∑–Ω–∞—á–µ–Ω–∏–µ —É –°—É—â–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç.
–í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ, –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é ``shared``, ``common``, –∏–ª–∏ ``aggregate_name``, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–º, –µ—Å–ª–∏ –î–æ–º–µ–Ω–Ω—ã–µ –°–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, ``events``, –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –û–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è –ê–≥—Ä–µ–≥–∞—Ç–æ–≤.
–í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –û–±—ä–µ–∫—Ç–æ–≤-–∑–Ω–∞—á–µ–Ω–∏–π –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ (–≤ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —É–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–º) ``exportable``, ``public``.
–ù—É –∞ —á—Ç–æ–±—ã –Ω–µ –ø–æ—è–≤–ª—è–ª–∏—Å—å –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö ``public2``, ``public3``, ``public4``..., –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç —Å —Ç–æ—á–∫–æ–π –≤ –ø–∞–∫–µ—Ç –∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–∞, –∏ —É–∂–µ –æ—Ç—Ç—É–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø–∞–∫–µ—Ç.

    All Value Objects which are part of a Customer live in another subpackage named value. I have to do this because in Go circular dependencies are not allowed. If I would put the Value Objects into the customer package then Commands and Events in domain would import the Value Objects from customer and functions in customer would import Commands and Events from domain. Having them in a subpackage additionally gives more privacy for the Value Objects. Not even functions of the Customer Aggregate can access private parts or create/modify a value without using the proper methods.

    -- "`Implementing Domain-Driven Design and Hexagonal Architecture with Go (2) <https://medium.com/@TonyBologni/implementing-domain-driven-design-and-hexagonal-architecture-with-go-2-efd432505554>`__" by Anton St√∂ckl -- Part 2 -- How I implement tactical DDD patterns -- the Domain layer.


–ï—â–µ –æ–¥–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–∞–∫–µ—Ç–µ –ª–∏–±–æ –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞–µ—Ç —Ç–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–µ —Ç–∞—â–∏—Ç –∑–∞ —Å–æ–±–æ–π –∫—É—á—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ —É —Å–≤–æ–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.


–ü–æ—á–µ–º—É –î–æ–º–µ–Ω–Ω—ã–µ –°–æ–±—ã—Ç–∏—è —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ –∏ –µ–≥–æ –°—É—â–Ω–æ—Å—Ç–µ–π?
========================================================================

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –î–æ–º–µ–Ω–Ω—ã—Ö –°–æ–±—ã—Ç–∏–π `–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –ê–≥—Ä–µ–≥–∞—Ç–æ–≤ <https://github.com/dotnet-architecture/eShopOnContainers/tree/ce50bb8a2f1fa30e419d9a6863d19eb9999e9ef8/src/Services/Ordering/Ordering.Domain/Events>`__.

–ù–æ —É–¥–æ–±–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –±–ª–∏–∂–µ –∫ —Å–≤–æ–µ–π –ø—Ä–∏—á–∏–Ω–µ.

–ü—Ä–∏ —ç—Ç–æ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –î–æ–º–µ–Ω–Ω—ã–µ –°–æ–±—ã—Ç–∏—è –≤—ã—Ä–∞–∂–∞—é—Ç –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ê–≥—Ä–µ–≥–∞—Ç–∞–º–∏, —É–¥–æ–±–Ω–æ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Ö `–Ω–µ –≤–¥–∞–≤–∞—è—Å—å <https://github.com/VaughnVernon/IDDD_Samples_NET/blob/master/iddd_agilepm/Domain.Model/Products/ProductDiscussionInitiated.cs>`__ –≤ –¥–µ—Ç–∞–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ê–≥—Ä–µ–≥–∞—Ç–æ–≤.

–¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ (–ü—É–±–ª–∏—á–Ω—ã–µ –î–æ–º–µ–Ω–Ω—ã–µ) –°–æ–±—ã—Ç–∏—è, –≤—ã—Ä–∞–∂–∞—é—â–∏–µ –≤–∑–∞–∏–º–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –µ–¥–∏–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ—Ä–æ–∂–¥–∞—é—â–µ–≥–æ –∏—Ö –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞.
