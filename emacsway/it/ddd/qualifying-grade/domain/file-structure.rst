:canonical-base-url: https://dckms.github.io/system-architecture

.. index::
   single: Encapsulation; in Golang
   :name: emacsway-golang-domain-file-structure

==================================
–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
==================================

.. sectionauthor:: Ivan Zakrevsky

–û –ø—Ä–∏—á–∏–Ω–∞—Ö –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∞–∫–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

.. contents:: –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ


–ó–∞—á–µ–º –≤ –∫–∞–∂–¥–æ–º Bounded Context –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è internal?
===================================================

–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞.
–î—Ä—É–≥–∏–º Bounded Contexts –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ CQRS-Commands –∏ Public Domain Events (Integration Events).


–ü–æ—á–µ–º—É –∞–≥—Ä–µ–≥–∞—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö?
=====================================

–ü—Ä–∏—á–∏–Ω—ã –¥–≤–µ:

1. –ß—Ç–æ–±—ã –ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—å High Cohesion, —Å–º. –≥–ª–∞–≤—É "Chapter Five. A Model Expressed in Software :: Modules" –∫–Ω–∏–≥–∏ "Domain-Driven Design: Tackling Complexity in the Heart of Software" by Eric Evans.
2. –í Golang —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ :ref:`–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ <emacsway-golang-encapsulation>`, —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º –∞—Ç—Ä–∏–±—É—Ç–∞–º –ê–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑–≤–Ω–µ.


–ü–æ—á–µ–º—É –°—É—â–Ω–æ—Å—Ç–∏ –ê–≥—Ä–µ–≥–∞—Ç–æ–≤ –≤—ã–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é?
==========================================================

–ß—Ç–æ–±—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —ç—Ç–æ–π –°—É—â–Ω–æ—Å—Ç—å—é –æ–±—ä–µ–∫—Ç—ã.
–ù–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–Ω–µ–≥—Ä–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –°—É—â–Ω–æ—Å—Ç–µ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –≤ –º–æ–º–µ–Ω—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∏ –ø–æ–≤—ã—à–∞—é—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

–í–ø—Ä–æ—á–µ–º, —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–∫–∞ —á—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –∏ –Ω–µ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–º, –Ω–æ –æ–Ω–æ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è.

–ï—Å—Ç—å —É —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –°—É—â–Ω–æ—Å—Ç—å, —Ö–æ—Ç—è –∏ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å—Å—è –Ω–∞—Ä—É–∂—É –ê–≥—Ä–µ–≥–∞—Ç–∞, –µ—Å–ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –æ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–π.

    üí¨Ô∏è "–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –°–£–©–ù–û–°–¢–ò –∏ –û–ë–™–ï–ö–¢–´-–ó–ù–ê–ß–ï–ù–ò–Ø –≤ –ê–ì–†–ï–ì–ê–¢–´ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö.
    –í—ã–±–µ—Ä–∏—Ç–µ –æ –¥–∏–Ω –æ–±—ä–µ–∫—Ç-–°–£–©–ù–û–°–¢–¨ –∏ —Å–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∫–æ—Ä–Ω–µ–≤—ã–º.
    –û—Å—É—â–µ—Å—Ç–≤–ª—è–π—Ç–µ –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –æ–±—ä–µ–∫—Ç–∞–º –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ê–ì–†–ï–ì–ê–¢–ê —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –µ–≥–æ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç.
    –†–∞–∑—Ä–µ—à–∞–π—Ç–µ –≤–Ω–µ—à–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç.
    –°—Å—ã–ª–∫–∏ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã –ê–ì–†–ï–ì–ê–¢–ê —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ , –Ω–∞ –≤—Ä–µ–º—è –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
    –ü–æ—Å–∫–æ–ª—å–∫—É –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç–∞–º –ê–ì–†–ï–ì–ê–¢–ê –∫–æ–Ω¬≠—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã.
    –í —Ç–∞–∫–æ–π —Å—Ö–µ–º–µ —Ä–∞–∑—É–º–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è –≤—Å–µ—Ö –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ê–ì–†–ï–ì–ê–¢–ï –∏ –¥–ª—è –≤—Å–µ–≥–æ –ê–ì–†–ï–ì–ê–¢–ê –≤ —Ü–µ–ª–æ–º –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

    Cluster the ENTITIES and VALUE OBJECTS into AGGREGATES and define boundaries around each.
    Choose one ENTITY to be the root of each AGGREGATE , and control all access to the objects inside the boundary through the root.
    Allow external objects to hold references to the root only.
    Transient references to internal members can be passed out for use within a single operation only.
    Because the root controls access, it cannot be blindsided by changes to the internals.
    This arrangement makes it practical to enforce all invariants for objects in the AGGREGATE and for the AGGREGATE as a whole in any state change."

    -- "Domain-Driven Design: Tackling Complexity in the Heart of Software" by Eric¬†Evans, –ø–µ—Ä–µ–≤–æ–¥ –í.–õ. –ë—Ä–æ–¥–æ–≤–æ–≥–æ

–û —á–µ–º —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç?
–≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –º—ã —Ä–∞–∑–º–µ—Å—Ç–∏–º –°—É—â–Ω–æ—Å—Ç—å –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ —Å –ê–≥—Ä–µ–≥–∞—Ç–æ–º, —Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ê–≥—Ä–µ–≥–∞—Ç—É –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –°—É—â–Ω–æ—Å—Ç–∏.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ê–≥—Ä–µ–≥–∞—Ç –æ–±–ª–∞–¥–∞–µ—Ç –¥—Ä—É–≥–∏–º —É—Ä–æ–≤–Ω–µ–º –¥–æ—Å—Ç—É–ø–∞, –Ω–µ–∂–µ–ª–∏ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º—É—Ç–∏—Ä—É—é—â–∏–º –º–µ—Ç–æ–¥–∞–º –°—É—â–Ω–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–∏ –Ω—É–∂–Ω—ã –ê–≥—Ä–µ–≥–∞—Ç—É.

–¢–∞–∫ –∂–µ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞—é—Ç –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–∞—à–∞—é—â–µ–π –º–æ–Ω—Å—Ç—Ä—É–æ–∑–Ω–æ—Å—Ç–∏, —á—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç, —Å–∫–æ—Ä–µ–µ, –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç, –Ω–µ–∂–µ–ª–∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π.


–ü–æ—á–µ–º—É –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞ –µ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ–º?
=============================================================

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤.
–ù–∞–ø—Ä–∏–º–µ—Ä, –ê–≥—Ä–µ–≥–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω –æ —Å–≤–æ–µ–π –°—É—â–Ω–æ—Å—Ç–∏, –∞ –°—É—â–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–≤–µ–¥–æ–º–ª–µ–Ω–∞ –æ–± –û–±—ä–µ–∫—Ç–µ-–∑–Ω–∞—á–µ–Ω–∏–∏ –ê–≥—Ä–µ–≥–∞—Ç–∞.
–ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –≤—Å–µ –û–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è –ê–≥—Ä–µ–≥–∞—Ç–∞ –≤—ã–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
–ò–Ω–∞—á–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ C—É—â–Ω–æ—Å—Ç–∏ –∏ –û–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è –ê–≥—Ä–µ–≥–∞—Ç–∞ —Ä–∞–∑–º–µ—Ç–∏—Ç—å –ø–ª–æ—Å–∫–∏–º —Å–ø–∏—Å–∫–æ–º –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.


–ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤?
============================================

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ –≤ –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º, —Ä–∞–∑–≤–µ —á—Ç–æ, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ SeedWork.
–ü—Ä–∏—á–∏–Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–∞–∫–∂–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —è–≤–ª—è—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å—Ä–µ–¥—Å—Ç–≤–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤–≤–∏–¥—É —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω–∏ –Ω–µ —Ç–∞—â–∞—Ç –∑–∞ —Å–æ–±–æ–π –≤—Å—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å –µ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –∏—Ö –æ—Ç—ã—Å–∫–∞—Ç—å, –∏—Å–∫–ª—é—á–∏–≤ –∏–∑ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω—ã–º, –ø–æ—Å–∫–æ–ª—å–∫—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —è–≤–ª—è—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

